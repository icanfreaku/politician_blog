{"version":3,"names":[],"mappings":"","sources":["app.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nangular.module('myapp', ['ngRoute', 'ngResource', 'ngNamedRoute', 'dcbImgFallback']).config([\"$routeProvider\", \"$locationProvider\", function ($routeProvider, $locationProvider) {\n    $locationProvider.html5Mode(true);\n    $routeProvider.otherwise({\n        redirectTo: '/'\n    });\n}]).controller('HeaderController', [\"$scope\", \"$location\", function ($scope, $location) {\n\n    $scope.isActive = function (viewLocation) {\n        return viewLocation === $location.path();\n    };\n}]).filter('startFrom', function () {\n    return function (input, start) {\n        start = +start; //parse to int\n        return input.slice(start);\n    };\n});\nrequire('./sample');\n\n},{\"./sample\":2}],2:[function(require,module,exports){\nrequire('./routes');\nrequire('./services');\nrequire('./resources');\n\n},{\"./resources\":3,\"./routes\":15,\"./services\":22}],3:[function(require,module,exports){\nrequire('./resources-config');\nrequire('./politician-resource');\n\n},{\"./politician-resource\":4,\"./resources-config\":5}],4:[function(require,module,exports){\nangular.module('myapp').factory('Politician', ['$resource', function ($resource) {\n    return $resource('/api/politicians/:slug', { slug: '@slug' }, {\n        'list': { method: 'GET', isArray: true },\n        'update': { method: 'PUT' }\n    });\n}]);\n\n},{}],5:[function(require,module,exports){\nangular.module('myapp').config([\"$resourceProvider\", function ($resourceProvider) {\n    $resourceProvider.defaults.stripTrailingSlashes = false;\n}]);\n\n},{}],6:[function(require,module,exports){\nangular.module('myapp').controller('AboutController', [\"$scope\", function ($scope) {}]);\n\n},{}],7:[function(require,module,exports){\nangular.module('myapp').config([\"$routeProvider\", function ($routeProvider) {\n    $routeProvider.when('/about', {\n        name: 'about',\n        templateUrl: 'sample/routes/about/about.html',\n        controller: 'AboutController',\n        controllerAs: 'ctrl'\n    });\n}]);\n\n},{}],8:[function(require,module,exports){\nrequire('./about-controller');\nrequire('./about-routes');\n\n},{\"./about-controller\":6,\"./about-routes\":7}],9:[function(require,module,exports){\nangular.module('myapp').controller('ContactController', [\"$scope\", function ($scope) {}]);\n\n},{}],10:[function(require,module,exports){\nangular.module('myapp').config([\"$routeProvider\", function ($routeProvider) {\n    $routeProvider.when('/contact', {\n        name: 'contact',\n        templateUrl: 'sample/routes/contact/contact.html',\n        controller: 'ContactController',\n        controllerAs: 'ctrl'\n    });\n}]);\n\n},{}],11:[function(require,module,exports){\nrequire('./contact-controller');\nrequire('./contact-routes');\n\n},{\"./contact-controller\":9,\"./contact-routes\":10}],12:[function(require,module,exports){\nangular.module('myapp').controller('HomeController', [\"$scope\", \"orderByFilter\", \"Politician\", function ($scope, orderByFilter, Politician) {\n    var politicians = Politician.list();\n\n    politicians.$promise.then(function (result) {\n        $scope.orderedPoliticians = orderByFilter(result, \"-stats.total\");\n    });\n}]);\n\n},{}],13:[function(require,module,exports){\nangular.module('myapp').config([\"$routeProvider\", function ($routeProvider) {\n    $routeProvider.when('/', {\n        name: 'home',\n        templateUrl: 'sample/routes/home/home.html',\n        controller: 'HomeController',\n        controllerAs: 'ctrl'\n    });\n}]);\n\n},{}],14:[function(require,module,exports){\nrequire('./home-controller');\nrequire('./home-routes');\n\n},{\"./home-controller\":12,\"./home-routes\":13}],15:[function(require,module,exports){\nrequire('./home');\nrequire('./rank');\nrequire('./politician');\nrequire('./contact');\nrequire('./about');\n\nangular.module('myapp').run([\"$rootScope\", \"namedRouteService\", function ($rootScope, namedRouteService) {\n    $rootScope.$on('$routeChangeError', function (ev, current, previous, rejection) {\n        if (rejection.status === 404) {\n            alert('Not found');\n            namedRouteService.open('home');\n        }\n    });\n}]);\n\n},{\"./about\":8,\"./contact\":11,\"./home\":14,\"./politician\":16,\"./rank\":19}],16:[function(require,module,exports){\nrequire('./politician-controller');\nrequire('./politician-routes');\n\n},{\"./politician-controller\":17,\"./politician-routes\":18}],17:[function(require,module,exports){\nangular.module('myapp').controller('PoliticianController', [\"$scope\", \"PoliticianData\", \"Politician\", function ($scope, PoliticianData, Politician) {\n\n    $scope.politicianData = new Politician(PoliticianData);\n    console.log($scope.politicianData);\n}]);\n\n},{}],18:[function(require,module,exports){\nangular.module('myapp').config([\"$routeProvider\", function ($routeProvider) {\n    $routeProvider.when('/politician/:slug', {\n        name: 'politician',\n        templateUrl: 'sample/routes/politician/politician.html',\n        controller: 'PoliticianController',\n        controllerAs: 'ctrl',\n        resolve: {\n            PoliticianData: [\"Politician\", \"$route\", function (Politician, $route) {\n                var politicianData = Politician.get({\n                    slug: $route.current.params.slug\n                });\n                return politicianData.$promise;\n            }]\n        }\n    });\n}]);\n\n},{}],19:[function(require,module,exports){\nrequire('./rank-controller');\nrequire('./rank-routes');\n\n},{\"./rank-controller\":20,\"./rank-routes\":21}],20:[function(require,module,exports){\nangular.module('myapp').controller('RankController', [\"$scope\", \"Politician\", \"orderByFilter\", \"$location\", function ($scope, Politician, orderByFilter, $location) {\n    $scope.currentPage = 0;\n    $scope.pageSize = 10;\n    $scope.rankBy = \"-stats.total\";\n    $scope.politicians = Politician.list();\n\n    $scope.politicians.$promise.then(function (result) {\n        $scope.politicians = result;\n        buildPagination();\n        $scope.rank();\n        console.log($scope.politicians);\n    });\n\n    var getItems = function () {\n        var items = $scope.politicians;\n        if ($scope.query && $scope.filtered.length > 0) {\n            items = $scope.filtered;\n        }\n        return items;\n    };\n\n    var buildPagination = function () {\n\n        $scope.numberOfPages = new Array(Math.ceil(getItems().length / $scope.pageSize));\n    };\n\n    $scope.rank = function () {\n        $scope.politicians = orderByFilter($scope.politicians, $scope.rankBy);\n    };\n\n    $scope.changePage = function (page) {\n        if (page >= 0 && page <= getItems().length / $scope.pageSize) {\n            $scope.currentPage = page;\n        }\n    };\n\n    $scope.go = function (politician) {\n        $location.path('/politician/' + politician.slug);\n    };\n\n    $scope.search = function (item) {\n        var found = false;\n        var fullName = item.first_name + \" \" + item.last_name;\n        if (!$scope.query || item.first_name.toLowerCase().indexOf($scope.query.toLowerCase()) != -1 || item.last_name.toLowerCase().indexOf($scope.query.toLowerCase()) != -1 || fullName.toLowerCase().indexOf($scope.query.toLowerCase()) != -1) {\n\n            found = true;\n        }\n\n        buildPagination();\n\n        return found;\n    };\n\n    $scope.hasNext = function () {\n        return $scope.currentPage >= getItems().length / $scope.pageSize - 1;\n    };\n}]);\n\n},{}],21:[function(require,module,exports){\nangular.module('myapp').config([\"$routeProvider\", function ($routeProvider) {\n    $routeProvider.when('/rank', {\n        name: 'rank',\n        templateUrl: 'sample/routes/rank/rank.html',\n        controller: 'RankController',\n        controllerAs: 'ctrl'\n    });\n}]);\n\n},{}],22:[function(require,module,exports){\n\n},{}]},{},[1]);\n"],"file":"app.js","sourceRoot":"/source/"}